# ═══════════════════════════════════════════════════════════════
# RECOMMENDARR — Environment Configuration
# ═══════════════════════════════════════════════════════════════
# Copy this file to .env and fill in your values.
# Required fields are marked with [REQUIRED].
# Optional fields have sensible defaults.

# ── Application ─────────────────────────────────────────────────
APP_NAME=Recommendarr
APP_URL=http://localhost:30800
SECRET_KEY=change-me-to-a-random-string      # [REQUIRED] JWT signing key
DEBUG=false
LOG_LEVEL=info                                # debug | info | warning | error

# ── Database ────────────────────────────────────────────────────
# Standalone (docker-compose default):
DATABASE_URL=postgresql+asyncpg://recommendarr:recommendarr@recommendarr-db:5432/recommendarr

# ── Plex [REQUIRED] ────────────────────────────────────────────
PLEX_URL=http://localhost:32400
PLEX_TOKEN=                                   # [REQUIRED] Admin Plex token
PLEX_MACHINE_ID=                              # Server machine ID (for sharing API)

# ── Tautulli (recommended) ─────────────────────────────────────
TAUTULLI_URL=http://localhost:8181
TAUTULLI_API_KEY=                             # Leave empty to use Plex direct history
TAUTULLI_WEBHOOK_SECRET=                      # Optional: verify webhook authenticity

# ── TMDB [REQUIRED] ────────────────────────────────────────────
TMDB_API_KEY=                                 # [REQUIRED] Free key from themoviedb.org
TMDB_LANGUAGE=en-US                           # Default metadata language
TMDB_CACHE_TTL_DAYS=7                         # How long to cache TMDB metadata

# ── Radarr (optional — enables "Worth Grabbing" + auto-grab) ───
RADARR_URL=
RADARR_API_KEY=
RADARR_QUALITY_PROFILE_ID=                    # Default quality profile for auto-grab
RADARR_ROOT_FOLDER=                           # Default root folder path

# ── Sonarr (optional — enables TV recommendations) ──────────────
SONARR_URL=
SONARR_API_KEY=
SONARR_ANIME_URL=                             # Separate Sonarr for anime (optional)
SONARR_ANIME_API_KEY=

# ── Seerr/Overseerr (optional — enables request proxy) ─────────
SEERR_URL=
SEERR_API_KEY=

# ── ChromaDB (vector storage for embeddings) ────────────────────
CHROMADB_URL=http://chromadb:8000
CHROMADB_COLLECTION=recommendarr

# ── LLM / Explanation Engine ───────────────────────────────────
EXPLANATION_MODE=auto                         # auto | template | llm
# auto: detect Ollama → Tier 2, else API key → Tier 3, else Tier 1
LLM_PROVIDER=ollama                           # ollama | openrouter | groq | gemini | custom
LLM_MODEL=auto                               # auto = pick in UI. Or hardcode model name.
LLM_BASE_URL=http://ollama:11434              # Ollama endpoint
LLM_API_KEY=                                  # Only for Tier 3 remote providers

# ── Embedding Model ─────────────────────────────────────────────
EMBEDDING_MODEL=nomic-embed-text              # Ollama embedding model name
EMBEDDING_URL=http://ollama:11434             # Usually same as LLM_BASE_URL

# ── Notifications (Apprise) ─────────────────────────────────────
# Configure per-user in the web UI, or set server-wide defaults here:
# APPRISE_URLS=discord://webhook_id/webhook_token,tgram://bot_token/chat_id

# ── Plex Native Push ───────────────────────────────────────────
PLEX_PUSH_PLAYLISTS=true                      # Create "Recommended For You" playlists
PLEX_PUSH_COLLECTIONS=false                   # Create per-library collections
PLEX_PUSH_SCHEDULE=daily                      # daily | hourly | manual

# ── Contextual Awareness ───────────────────────────────────────
WEATHER_API_KEY=                              # OpenWeatherMap free tier (optional)
WEATHER_LOCATION=Schaffhausen,CH              # Default location for weather context

# ── Server ──────────────────────────────────────────────────────
HOST=0.0.0.0
PORT=8000
WORKERS=2                                     # Uvicorn workers
